/**
 * EMS(IMP) v0.2
 * Easy Module System: 简洁、易用的模块系统
 * 作者：侯锋
 * 邮箱：admin@xhou.net
 * 网站：http://houfeng.net , http://houfeng.net/ems
 *
 *
 * ***********************< EMS >************************
 *
 * ems 全称为 "Easy Module System" 他还有一个别名叫: "imp";
 * ems 作为 "EMD" 的实现标准范本; 完全符合 "EMD规范";
 *
 *
 * *********************< EMD 规范 >**********************
 *
 * EMD 全称为 "Easy Module Definition"
 *
 * 规范定义:
 * define([deps...<require>,<exports>,<module>]function(... <require>,<exports>,<module>){
 *
 * 	    //动态导入依赖 (AMD)
 * 		require([deps...],function(...){
 *
 * 		});
 *
 * 		//标准导出 (AMD)
 * 		return {
 * 			say:function(){}
 * 		};
 *
 *      //类CommonJS导入 (CommonJS)
 *      var a=require('a');
 *
 *      //类CommonJS导出 (CommonJS)
 *      exports.say=function(){};
 * });
 *
 *
 * ******************************************************
 *
 */

this.ems=this.imp={};(function(b){var k=function(t,s){if(!t||!s){return;}for(var r in t){var q=s.call(t[r],r);if(q){break;}}};var a=function(q){var r=document.createElement("script");
r.src=q;r.async=true;r.defer=true;r.type="text/javascript";return r;};var n=function(r){var q=document.createElement("link");q.href=r;q.type="text/css";
q.rel="stylesheet";return q;};var e=function(r){var q=document.getElementsByTagName("head");q=q?q[0]:document.body;q.appendChild(r);};var p=function(r,q,s){r.addEventListener=r.addEventListener||function(u,v,t){if(r.attachEvent){r.attachEvent("on"+u,s);
}};r.removeEventListener=r.removeEventListener||function(u,v,t){if(r.detachEvent){r.detachEvent("on"+u,s);}};return r;};var l=function(q,s){if(!s){return;
}p(q);var r=q.attachEvent?"readystatechange":"load";q.addEventListener(r,function(){var t=q.readyState||"loaded";if(t=="loaded"||t=="interactive"||t=="complete"){s.apply(q,arguments);
}});};var h={require:{loaded:true,exports:"require"},exports:{loaded:true,exports:"exports"},moeule:{loaded:true,exports:"moeule"}};b.moduleTable=h;var j=function(q,r){if(h[q]==null){h[q]=new i(q);
}if(h[q].loaded&&r){r(h[q].exports);return h[q].exports;}if(h[q].loadCallbacks!=null){h[q].loadCallbacks.push(r);return;}h[q].loadCallbacks=[];h[q].loadCallbacks.push(r);
h[q].element=q.indexOf(".css")>0?n(q):a(q);l(h[q].element,function(){h[q].deps=f.moduleDeps;h[q].declare=f.moduleDeclare;f.moduleDeps=f.moduleDeclare=null;
h[q].require(h[q].deps,function(){if(h[q].declare){var t=[];for(var u=0;u<arguments.length;u++){if(arguments[u]=="require"){arguments[u]=h[q].require;}if(arguments[u]=="exports"){arguments[u]=h[q].exports;
}if(arguments[u]=="module"){arguments[u]=h[q].module;}t.push(arguments[u]);}var s=h[q].declare.apply(h[q],t);h[q].exports=s||h[q].exports;}k(h[q].loadCallbacks,function(){this(h[q].exports);
});h[q].loaded=true;h[q].loadCallbacks=null;});});e(h[q].element);};b.load=function(r,t){var s=null;var q=0;if(r&&r.length>0){k(r,function(){j(this,function(){q+=1;
if(q>=r.length){if(t){s=c(r);t.apply(null,s);}}});});}else{t.apply(null,s);}return s;};var c=function(q){var r=[];k(q,function(){if(h[this]){r.push(h[this].exports);
}});return r;};b.config=function(q){q=q||{};q.alias=q.alias||{};k(q.alias,function(r){d[r]=this;});};var d={};var m=function(r,t){if(r.indexOf("http://")==0||r.indexOf("https://")==0||r.indexOf("/")==0||r=="require"||r=="exports"||r=="module"){return r;
}var q=r.split("/");var s=t.substring(0,t.lastIndexOf("/")).split("/");k(q,function(){if(this==".."){s.pop();}else{if(this=="."){}else{s.push(this);}}});
return s.join("/");};var o=function(s,r){if((typeof s)=="string"){s=[s];}var q=[];k(s,function(){var t=d[this]||this;q.push(m(t,r));});return q;};var i=function(q){var q=this.uri=this.id=q||"/";
this.resovleUri=function(r){return m(r,q);};this.require=function(t,u){var s=o(t,q);var r=b.load(s,u);return r&&r.length==1?r[0]:r;};this.exports={};this.declare=null;
this.deps=null;this.loaded=false;};var f={moduleDeclare:null,moduleDeps:null};b.define=function(r,q){if(r&&q){f.moduleDeps=r;f.moduleDeclare=q;}else{if(r){f.moduleDeclare=r;
}else{}}};b.define.amd=b.define.emd=b.define.eamd={};var g=function(){var q=document.getElementsByTagName("script");var r="";k(q,function(){var s=this.getAttribute("data-main");
if(s){r=s;return true;}});return r;};if(window){window.define=b.define;}b.load([g()]);})(this.ems);