/**
 * EMS(IMP) v0.1
 * Easy Module System: 简洁、易用的模块系统
 * 作者：侯锋
 * 邮箱：admin@xhou.net
 * 网站：http://houfeng.net , http://houfeng.net/ems
 *
 *
 * ***********************< EMS >************************
 *
 * ems 全称为 "Easy Module System" 他还有一个别名叫: "imp";
 * ems 作为 "EMD" 的实现标准范本; 完全符合 "EMD规范";
 *
 *
 * *********************< EMD 规范 >**********************
 *
 * EMD 全称为 "Easy Module Definition"
 *
 * 定义一个模块
 * define(function(require,exports,module){
 * 		require([module...],function(){
 *
 * 		});
 *
 * 		exports= {
 * 			say:function(){}
 * 		};
 * });
 *
 * ******************************************************
 *
 */

this.ems=this.imp={};(function(b){var k=function(u,t){for(var s in u){var r=t.call(u[s],s);if(r){break;}}};var a=function(r){var s=document.createElement("script");
s.src=r;s.async=true;s.defer=true;s.type="text/javascript";return s;};var o=function(s){var r=document.createElement("link");r.href=s;r.type="text/css";
r.rel="stylesheet";return r;};var e=function(s){var r=document.getElementsByTagName("head");r=r?r[0]:document.body;r.appendChild(s);};var q=function(s,r,t){s.addEventListener=s.addEventListener||function(v,w,u){if(s.attachEvent){s.attachEvent("on"+v,t);
}};s.removeEventListener=s.removeEventListener||function(v,w,u){if(s.detachEvent){s.detachEvent("on"+v,t);}};return s;};var l=function(r,t){q(r);var s=r.attachEvent?"readystatechange":"load";
r.addEventListener(s,t);};var j={};var g={};var i=function(s,t){if(j[s]!=null&&t){t(j[s]);return;}if(g[s]!=null){g[s].push(t);return;}g[s]=[];g[s].push(t);
var r=s.indexOf(".css")>0?o(s):a(s);l(r,function(){var u=new h(s);var v=null;if(m){v=m(u.require,u.exports,u);v=v||u.exports;m=null;}j[s]=v;k(g[s],function(){this(j[s]);
});g[s]=null;});e(r);};b.load=function(s,t){var r=0;k(s,function(){i(this,function(){r+=1;if(r>=s.length){if(t){var u=c(s);t.apply(null,u);}}});});};var c=function(r){var s=[];
k(r,function(){s.push(j[this]);});return s;};b.config=function(r){r=r||{};r.alias=r.alias||{};k(r.alias,function(s){d[s]=this;});};var d={};var n=function(s,u){if(s.indexOf("http://")==0||s.indexOf("https://")==0||s.indexOf("/")==0){return s;
}var r=s.split("/");var t=u.substring(0,u.lastIndexOf("/")).split("/");k(r,function(){if(this==".."){t.pop();}else{if(this=="."){}else{t.push(this);}}});
return t.join("/");};var p=function(t,s){var r=[];k(t,function(){var u=d[this]||this;r.push(n(u,s));});return r;};var h=function(r){var r=this.uri=r||"/";
this.resovleUri=function(s){return n(s,r);};this.require=function(s,t){b.load(p(s,r),t);};this.exports={};};var m=null;b.define=function(r){m=r;};var f=function(){var r=document.getElementsByTagName("script");
var s="";k(r,function(){var t=this.getAttribute("data-main");if(t){s=t;return true;}});return s;};if(window){window.define=b.define;}b.load([f()]);})(this.ems);
